For r1: N, r2: N, answer: N
For r1: N, r2: W, answer: NW, W
For r1: N, r2: E, answer: From  
x N y → supy(y) ≤ infy(x), infx(y) ≤ infx(x), supx(x) ≤ supx(y)  
y E z → supx(z) ≤ infx(y), infy(z) ≤ infy(y), supy(y) ≤ supy(z)

we get  
supx(z) ≤ infx(y) ≤ infx(x) ⇒ supx(z) ≤ infx(x) ,  
so x is to the east of z.  
Concerning the y–coordinates we only know supy(y) ≤ infy(x) and supy(y) ≤ supy(z); hence

• It can be that supy(z) ≤ infy(x).  
 Then z is also south of x and the relation is x NE z.

• It can be that infy(z) ≤ infy(x) ≤ supy(x) ≤ supy(z).  
 Then the y–interval of x is contained in that of z and the relation is x E z.

No other cardinal–direction definition can be satisfied.  
Therefore the only possible relations between x and z are

NE or E
For r1: N, r2: S, answer: N, S, B
For r1: N, r2: NW, answer: NW
For r1: N, r2: SW, answer: NW, W, SW
For r1: N, r2: SE, answer: The relation that is forced by the given information is that x lies to the east of z (supx(z) ≤ infx(x)).  
Nothing in the premises fixes their relative north/south ordering, nor does it force x’s vertical span to lie inside, outside, or overlap that of z. Hence three different situations are compatible with the constraints:

1. z lies completely south of x  → x NE z  
   (supx(z) ≤ infx(x) and supy(z) ≤ infy(x))

2. x’s and z’s vertical projections overlap, with x’s in-between z’s  → x E z  
   (supx(z) ≤ infx(x), infy(z) ≤ infy(x) and supy(x) ≤ supy(z) can all be satisfied)

3. x lies completely south of z  → x SE z  
   (supx(z) ≤ infx(x) and supy(x) ≤ infy(z))

Therefore the possible cardinal direction relations between region x and region z are:

NE, E, SE
For r1: N, r2: NE, answer: NE
For r1: N, r2: B, answer: N, B
For r1: W, r2: N, answer: N, NW
For r1: W, r2: W, answer: W
For r1: W, r2: E, answer: Possible relations: W, E or B
For r1: W, r2: S, answer: S, SW
For r1: W, r2: NW, answer: NW
For r1: W, r2: SW, answer: SW
For r1: W, r2: SE, answer: From x W y we know x lies completely to the west of y and overlaps y vertically.  
From y SE z we know y is south-east of z, i.e. y lies completely to the south of z and to the east of z.

Putting the two facts together gives  
supy(x) ≤ supy(y) ≤ infy(z),  
so x is totally south of z.

Horizontally we only know that both x and z are to the west of y, but nothing fixes their mutual order; x can be left of z, right of z, or horizontally contained in z.

Therefore the only cardinal directions compatible with “x is south of z” are

SW (if x is also west of z),  
S  (if x’s x-extent is contained in z’s),  
SE (if x is east of z).

All three configurations can occur, so the possible relations between x and z are:

SW, S, SE.
For r1: W, r2: NE, answer: The only relations that can hold between x and z are  
NW, N, or NE.
For r1: W, r2: B, answer: W or B
For r1: E, r2: N, answer: The only relations that can occur between x and z are  

N and NE
For r1: E, r2: W, answer: E, W, B
For r1: E, r2: E, answer: E
For r1: E, r2: S, answer: S, SE
For r1: E, r2: NW, answer: N, NE, NW
For r1: E, r2: SW, answer: S, SE, SW
For r1: E, r2: SE, answer: SE
For r1: E, r2: NE, answer: NE
For r1: E, r2: B, answer: B, E
For r1: S, r2: N, answer: The only relations that can occur between x and z are  

N (x is North of z),  
S (x is South of z), or  
B (x is inside the bounding box of z).
For r1: S, r2: W, answer: W, SW
For r1: S, r2: E, answer: E, SE
For r1: S, r2: S, answer: S
For r1: S, r2: NW, answer: Given the constraints

x S y ⇒ supy(x) ≤ infy(y) and infx(y) ≤ infx(x) ≤ supx(x) ≤ supx(y)

y NW z ⇒ supx(y) ≤ infx(z) and supy(z) ≤ infy(y)

we obtain

supx(x) ≤ supx(y) ≤ infx(z) ⇒ supx(x) ≤ infx(z).

Hence x’s bounding box lies entirely to the left of z’s bounding box.  
No restriction is imposed on their vertical ordering; x may be above, overlapping in y-range, or below z.

Therefore the only feasible cardinal direction relations from x to z are the three “western” ones:

NW, W, SW
For r1: S, r2: SW, answer: SW
For r1: S, r2: SE, answer: SE
For r1: S, r2: NE, answer: NE, E, SE
For r1: S, r2: B, answer: Given  
x S y: supy(x) ≤ infy(y), infx(y) ≤ infx(x), supx(x) ≤ supx(y)  
y B z: infx(z) ≤ infx(y), supx(y) ≤ supx(z), infy(z) ≤ infy(y), supy(y) ≤ supy(z)

From these we obtain  
infx(z) ≤ infx(x) and supx(x) ≤ supx(z);  
so x’s x-extent lies inside z’s x-extent.

Thus x cannot be E, W, NE, NW, SE, SW of z (all of them need the opposite horizontal inequalities).

Two possibilities remain:

1. If supy(x) ≤ infy(z), then x is completely below z → x S z.
2. If infy(z) ≤ infy(x) (and supy(x) ≤ supy(z) already holds), then x’s box is inside z’s box → x B z.

Either of these vertical situations can occur while keeping x S y and y B z true, so both are feasible.

Therefore the possible relations between x and z are:
S or B.
For r1: NW, r2: N, answer: N, NW
For r1: NW, r2: W, answer: W, NW
For r1: NW, r2: E, answer: NW, N, NE, W, E, B
For r1: NW, r2: S, answer: N, S, W, NW, SW, B
For r1: NW, r2: NW, answer: NW
For r1: NW, r2: SW, answer: NW, W, SW
For r1: NW, r2: SE, answer: N, NE, E, SE, S, SW, W, NW, B
For r1: NW, r2: NE, answer: The only relations that can be satisfied are

NW, N, NE
For r1: NW, r2: B, answer: The composition NW ∘ B can yield only the following cardinal direction relations:

N, NW, W, B
For r1: SW, r2: N, answer: The relations that can occur between region x and region z are  
B, S, SW, W, NW and N.
For r1: SW, r2: W, answer: W, SW
For r1: SW, r2: E, answer: B  S  SW  W  SE  E
For r1: SW, r2: S, answer: Given  
x SW y ⇒ supx(x) ≤ infx(y)  and  supy(x) ≤ infy(y)  
y S z  ⇒ supy(y) ≤ infy(z),  infx(z) ≤ infx(y),  supx(y) ≤ supx(z)

From these we always have  
supy(x) ≤ infy(y) ≤ infy(z),  so supy(x) ≤ infy(z).

Horizontally we only know supx(x) ≤ infx(y) and infx(z) ≤ infx(y);  
supx(x) can be either ≤ or > infx(z) depending on the particular regions.

• If supx(x) ≤ infx(z) we obtain both  
supx(x) ≤ infx(z)  and  supy(x) ≤ infy(z) → x SW z.

• If infx(z) ≤ supx(x) we have  
supy(x) ≤ infy(z) together with  
infx(z) ≤ infx(x)  and  supx(x) ≤ supx(z) (the latter two can always be satisfied by choosing a sufficiently wide z).  
This gives x S z.

All other nine cardinal-direction conditions require inequalities that contradict the fixed constraints above. Therefore the only relations that can hold between x and z are

S or SW.
For r1: SW, r2: NW, answer: NW, W, SW
For r1: SW, r2: SW, answer: SW
For r1: SW, r2: SE, answer: From  
x SW y ⇒ supx(x) ≤ infx(y) and supy(x) ≤ infy(y)          (x is west and south of y)  
y SE z ⇒ supx(z) ≤ infx(y) and supy(y) ≤ infy(z)          (y is east and south of z)

Combining the two y–coordinates:  
supy(x) ≤ infy(y) ≤ supy(y) ≤ infy(z) ⇒ supy(x) ≤ infy(z),

so x is definitely south of z.

Nothing is fixed in the x-direction between x and z; x can lie wholly to the west of z, overlap its x-projection, or lie wholly to the east of it. Hence the three possibilities are

SW : supx(x) ≤ infx(z) and supy(x) ≤ infy(z)  
S  : infx(z) ≤ infx(x) and supx(x) ≤ supx(z) and supy(x) ≤ infy(z)  
SE : supx(z) ≤ infx(x) and supy(x) ≤ infy(z)

Therefore the possible cardinal direction relations between region x and region z are

S, SW, SE
For r1: SW, r2: NE, answer: N, NE, E, SE, S, SW, W, NW, B
For r1: SW, r2: B, answer: SW, W, S or B
For r1: SE, r2: N, answer: The situation

x SE y   and  y N z  

gives the following constraints on the bounding-box coordinates:

1. supx(y) ≤ infx(x)     ( x is to the right of y )
2. supy(x) ≤ infy(y)     ( x is below y )
3. supy(z) ≤ infy(y)     ( z is below y )
4. infx(z) ≤ infx(y)     ( y is inside z horizontally )
5. supx(y) ≤ supx(z)     ( ” )

Nothing fixes the position of z with respect to x beyond these
inequalities, so two main horizontal situations are possible:

A.  supx(z) ≤ infx(x)   (z lies completely to the left of x)  
B.  infx(z) ≤ infx(x) < supx(x) ≤ supx(z)  (x is horizontally inside z)

For each of them we can choose vertical coordinates that make any of the
following relations between x and z true:

•  Case A (z left of x):  
   – NE ( z below x )  
   – E  ( x vertically inside z )  
   – SE ( x below z )

•  Case B (x inside z horizontally):  
   – N ( z below x )  
   – B ( x inside z vertically as well )  
   – S ( x below z )

Hence the possible cardinal-direction relations that can hold between
x and z are

B, N, NE, E, SE, S.
For r1: SE, r2: W, answer: B, S, SW, W, SE, E
For r1: SE, r2: E, answer: E, SE
For r1: SE, r2: S, answer: S, SE
For r1: SE, r2: NW, answer: N, NE, E, SE, S, SW, W, NW, B
For r1: SE, r2: SW, answer: SW, S, SE
For r1: SE, r2: SE, answer: SE
For r1: SE, r2: NE, answer: NE, E or SE
For r1: SE, r2: B, answer: B, S, E, SE
For r1: NE, r2: N, answer: N, NE
For r1: NE, r2: W, answer: B, N, NE, NW, E, W
For r1: NE, r2: E, answer: The relation between x and z can only be NE or E.
For r1: NE, r2: S, answer: NE, E, SE, N, S, B
For r1: NE, r2: NW, answer: The relation between x and z can only be one of  
N, NE, or NW.
For r1: NE, r2: SW, answer: N, NE, E, SE, S, SW, W, NW, B
For r1: NE, r2: SE, answer: The only relations that can hold between x and z are

NE, E or SE.
For r1: NE, r2: NE, answer: NE
For r1: NE, r2: B, answer: N, NE, E, B
For r1: B, r2: N, answer: N
For r1: B, r2: W, answer: W
For r1: B, r2: E, answer: E
For r1: B, r2: S, answer: S
For r1: B, r2: NW, answer: NW
For r1: B, r2: SW, answer: SW
For r1: B, r2: SE, answer: SE
For r1: B, r2: NE, answer: The relation is forced to be NE.
For r1: B, r2: B, answer: Because  

x B y  ⇒ infx(y) ≤ infx(x), supx(x) ≤ supx(y), infy(y) ≤ infy(x), supy(x) ≤ supy(y)  
y B z  ⇒ infx(z) ≤ infx(y), supx(y) ≤ supx(z), infy(z) ≤ infy(y), supy(y) ≤ supy(z)

Combining the inequalities gives  

infx(z) ≤ infx(x), supx(x) ≤ supx(z), infy(z) ≤ infy(x), supy(x) ≤ supy(z),

which is exactly the definition of x B z.  
None of the strict inequalities required by the other eight relations can be satisfied simultaneously with these four, so the only possible relation between x and z is

B
